<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üõ†Ô∏è Director's Dashboard v3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        
        /* Animaci√≥n de Flujo (Heredada v2) */
        .flow-line {
            background: linear-gradient(90deg, #334155 0%, #3b82f6 50%, #334155 100%);
            background-size: 200% 100%;
            animation: flowAnimation 2s infinite linear;
        }
        @keyframes flowAnimation { 0% { background-position: 100% 0; } 100% { background-position: -100% 0; } }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        /* Checkbox personalizado */
        .tool-checkbox:checked + div {
            border-color: #3b82f6;
            background-color: rgba(59, 130, 246, 0.1);
        }
        .tool-checkbox:checked + div .check-icon {
            opacity: 1;
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-200 h-screen flex overflow-hidden selection:bg-blue-500 selection:text-white">

    <!-- SIDEBAR -->
    <aside class="w-64 bg-slate-900 border-r border-slate-800 flex-shrink-0 flex flex-col transition-all duration-300">
        <div class="p-6 border-b border-slate-800">
            <h1 class="text-xl font-bold text-white tracking-tight flex items-center gap-2">
                <i class="fa-solid fa-layer-group text-blue-500"></i>
                Director<span class="text-slate-500">OS</span>
            </h1>
            <p class="text-xs text-slate-500 mt-1">v3.0 - Command Center</p>
        </div>
        
        <nav class="flex-1 overflow-y-auto p-4 space-y-2">
            
            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 pl-2">Vistas</p>
            
            <button onclick="switchView('generator')" id="btn-generator" class="w-full text-left px-3 py-2.5 rounded-lg text-sm transition font-medium flex items-center gap-3 bg-blue-600 text-white shadow-lg shadow-blue-900/20">
                <i class="fa-solid fa-wand-magic-sparkles"></i> Generador Prompts
            </button>

            <button onclick="switchView('grid')" id="btn-grid" class="w-full text-left px-3 py-2.5 rounded-lg hover:bg-slate-800 text-slate-400 text-sm transition font-medium flex items-center gap-3">
                <i class="fa-solid fa-boxes-stacked"></i> Glosario Herramientas
            </button>
            
            <button onclick="switchView('flow')" id="btn-flow" class="w-full text-left px-3 py-2.5 rounded-lg hover:bg-slate-800 text-slate-400 text-sm transition font-medium flex items-center gap-3">
                <i class="fa-solid fa-diagram-project"></i> Flujos Visuales
            </button>

            <!-- Filtros Din√°micos (Solo visibles en Grid) -->
            <div id="sidebar-filters" class="hidden mt-8 pt-6 border-t border-slate-800">
                <h3 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 pl-2">Filtros R√°pidos</h3>
                <div class="space-y-1" id="category-filters"></div>
            </div>
        </nav>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="flex-1 flex flex-col min-w-0 relative bg-slate-950">
        
        <!-- Header Com√∫n -->
        <header class="bg-slate-900/50 backdrop-blur border-b border-slate-800 p-4 h-16 flex justify-between items-center sticky top-0 z-20">
            <h2 id="page-title" class="text-lg font-semibold text-white">Generador de Prompts</h2>
            <div class="flex gap-3 items-center">
                 <div class="relative hidden" id="search-container">
                    <i class="fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 text-xs"></i>
                    <input type="text" id="searchInput" placeholder="Filtrar herramientas..." class="bg-slate-900 border border-slate-700 text-xs rounded-full py-1.5 pl-8 pr-4 w-48 focus:outline-none focus:border-blue-500 text-slate-300">
                </div>
                <span class="text-xs font-mono text-slate-500 bg-slate-900 px-2 py-1 rounded border border-slate-800" id="clock">00:00</span>
            </div>
        </header>

        <!-- VISTA 1: GENERADOR DE PROMPTS (La Joya de la Corona) -->
        <div id="view-generator" class="flex-1 overflow-y-auto p-8 relative">
            <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8">
                
                <!-- Columna Izquierda: Configuraci√≥n -->
                <div class="lg:col-span-4 space-y-6">
                    
                    <!-- Paso 1: Rol -->
                    <div class="bg-slate-900 border border-slate-800 rounded-xl p-5 shadow-sm">
                        <div class="flex items-center gap-2 mb-4">
                            <span class="bg-blue-500/10 text-blue-400 text-xs font-bold px-2 py-1 rounded">1</span>
                            <h3 class="font-bold text-white text-sm">Define el Rol</h3>
                        </div>
                        <select id="prompt-role" class="w-full bg-slate-950 border border-slate-700 rounded-lg p-2.5 text-sm text-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none">
                            <option value="Arquitecto de Software Senior">üèõÔ∏è Arquitecto Senior (Estructuras)</option>
                            <option value="Experto en Debugging y Python">üêõ Cazador de Bugs (Fixes)</option>
                            <option value="Ingeniero de Datos y RAG">üß† Ingeniero de IA/RAG (L√≥gica)</option>
                            <option value="Mentor T√©cnico Socr√°tico">üéì Profesor (Explicaciones)</option>
                            <option value="Desarrollador Frontend Minimalista">üé® Experto UX/UI (Interfaz)</option>
                        </select>
                    </div>

                    <!-- Paso 2: Objetivo -->
                    <div class="bg-slate-900 border border-slate-800 rounded-xl p-5 shadow-sm">
                        <div class="flex items-center gap-2 mb-4">
                            <span class="bg-blue-500/10 text-blue-400 text-xs font-bold px-2 py-1 rounded">2</span>
                            <h3 class="font-bold text-white text-sm">¬øQu√© quieres conseguir?</h3>
                        </div>
                        <textarea id="prompt-goal" rows="4" class="w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-sm text-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none resize-none" placeholder="Ej: Crear el endpoint de login, Explicarme c√≥mo funciona CLIP, Solucionar error de conexi√≥n..."></textarea>
                        
                        <div class="mt-3 flex flex-wrap gap-2">
                            <button onclick="setGoal('Generar andamiaje (scaffold) inicial de proyecto')" class="text-[10px] bg-slate-800 hover:bg-slate-700 text-slate-400 px-2 py-1 rounded border border-slate-700 transition">üèóÔ∏è Scaffold</button>
                            <button onclick="setGoal('Explicar este c√≥digo l√≠nea por l√≠nea')" class="text-[10px] bg-slate-800 hover:bg-slate-700 text-slate-400 px-2 py-1 rounded border border-slate-700 transition">üìñ Explicar</button>
                            <button onclick="setGoal('Optimizar para rendimiento y concurrencia')" class="text-[10px] bg-slate-800 hover:bg-slate-700 text-slate-400 px-2 py-1 rounded border border-slate-700 transition">üöÄ Optimizar</button>
                        </div>
                    </div>

                     <!-- Acci√≥n -->
                     <button onclick="generatePrompt()" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-900/20 transition transform active:scale-95 flex items-center justify-center gap-2">
                        <i class="fa-solid fa-bolt"></i> Generar Orden Maestra
                    </button>

                </div>

                <!-- Columna Central: Selecci√≥n de Herramientas -->
                <div class="lg:col-span-4 bg-slate-900 border border-slate-800 rounded-xl p-5 flex flex-col h-[calc(100vh-8rem)]">
                    <div class="flex items-center justify-between mb-4 flex-shrink-0">
                        <div class="flex items-center gap-2">
                            <span class="bg-blue-500/10 text-blue-400 text-xs font-bold px-2 py-1 rounded">3</span>
                            <h3 class="font-bold text-white text-sm">Selecciona Stack</h3>
                        </div>
                        <button onclick="clearSelection()" class="text-xs text-slate-500 hover:text-white transition">Limpiar</button>
                    </div>
                    
                    <div class="overflow-y-auto pr-2 space-y-2 flex-1" id="stack-selector">
                        <!-- Se llena con JS -->
                    </div>
                </div>

                <!-- Columna Derecha: Resultado -->
                <div class="lg:col-span-4 flex flex-col h-[calc(100vh-8rem)]">
                    <div class="bg-slate-800 border border-slate-700 rounded-xl p-1 flex-1 flex flex-col relative group">
                        <div class="absolute top-4 right-4 z-10 opacity-0 group-hover:opacity-100 transition">
                            <button onclick="copyToClipboard()" class="bg-blue-600 hover:bg-blue-500 text-white text-xs px-3 py-1.5 rounded-md shadow-lg font-medium transition flex items-center gap-2">
                                <i class="fa-regular fa-copy"></i> Copiar
                            </button>
                        </div>
                        <div class="bg-slate-950 rounded-lg p-4 flex-1 overflow-y-auto font-mono text-xs text-slate-300 leading-relaxed border border-slate-900" id="prompt-output">
                            <span class="text-slate-600 italic">// Aqu√≠ aparecer√° tu prompt dise√±ado para copiar y pegar...</span>
                            <br><br>
                            <span class="text-slate-700">1. Selecciona un Rol.</span><br>
                            <span class="text-slate-700">2. Escribe tu objetivo.</span><br>
                            <span class="text-slate-700">3. Elige las herramientas del stack.</span><br>
                            <span class="text-slate-700">4. Dale al bot√≥n Generar.</span>
                        </div>
                    </div>
                     <p class="text-center text-xs text-slate-500 mt-2">Dise√±ado para Claude 3.5 Sonnet / GPT-4o</p>
                </div>

            </div>
        </div>

        <!-- VISTA 2: GRID (Glosario) -->
        <div id="view-grid" class="hidden flex-1 overflow-y-auto p-6">
            <div id="tools-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5"></div>
        </div>

        <!-- VISTA 3: FLOW (Diagramas) -->
        <div id="view-flow" class="hidden flex-1 overflow-y-auto p-8 bg-slate-950">
             <!-- (Contenido heredado v2 - simplificado aqu√≠ para no alargar el c√≥digo, pero se mantiene la estructura) -->
             <div class="max-w-4xl mx-auto text-center py-20">
                <i class="fa-solid fa-diagram-project text-6xl text-slate-800 mb-4"></i>
                <h2 class="text-2xl font-bold text-slate-300">Diagrama de Flujo (Heredado v2)</h2>
                <p class="text-slate-500">Visualiza el contenido aqu√≠ como en la versi√≥n anterior.</p>
                <!-- Puedes volver a pegar el bloque del diagrama de la v2 aqu√≠ si lo necesitas -->
             </div>
        </div>

    </main>

    <script>
        // --- 1. DATOS (TU GLOSARIO) ---
        const tools = [
            { name: "HTML5", cat: "Frontend", id:"html" },
            { name: "CSS3 / Tailwind", cat: "Frontend", id:"css" },
            { name: "JS Vanilla", cat: "Frontend", id:"js" },
            { name: "HTMX", cat: "Frontend", id:"htmx" },
            { name: "Alpine.js", cat: "Frontend", id:"alpine" },
            { name: "Python 3.11", cat: "Backend", id:"python" },
            { name: "FastAPI", cat: "Backend", id:"fastapi" },
            { name: "Flask", cat: "Backend", id:"flask" },
            { name: "Loguru", cat: "Backend", id:"loguru" },
            { name: "Pydantic", cat: "Backend", id:"pydantic" },
            { name: "SQLite", cat: "Backend", id:"sqlite" },
            { name: "ChromaDB", cat: "IA & RAG", id:"chroma" },
            { name: "OpenAI CLIP", cat: "IA & RAG", id:"clip" },
            { name: "Whisper", cat: "IA & RAG", id:"whisper" },
            { name: "LangChain", cat: "IA & RAG", id:"langchain" },
            { name: "Docker", cat: "DevOps", id:"docker" },
            { name: "Git", cat: "DevOps", id:"git" }
        ];

        // --- 2. INICIALIZACI√ìN ---
        
        // Reloj
        setInterval(() => {
            const now = new Date();
            document.getElementById('clock').textContent = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }, 1000);

        // Renderizar Selectores de Stack (Generator View)
        const stackContainer = document.getElementById('stack-selector');
        
        // Agrupar por categor√≠a
        const categories = {};
        tools.forEach(t => {
            if(!categories[t.cat]) categories[t.cat] = [];
            categories[t.cat].push(t);
        });

        for (const [cat, items] of Object.entries(categories)) {
            const group = document.createElement('div');
            group.className = "mb-4";
            group.innerHTML = `<h4 class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2 sticky top-0 bg-slate-900 py-1">${cat}</h4>`;
            
            items.forEach(t => {
                const item = document.createElement('label');
                item.className = "flex items-center gap-3 p-2 rounded-lg cursor-pointer hover:bg-slate-800/50 transition group";
                item.innerHTML = `
                    <input type="checkbox" value="${t.name}" class="peer sr-only tool-checkbox">
                    <div class="w-4 h-4 rounded border border-slate-600 bg-slate-900 peer-checked:bg-blue-500 peer-checked:border-blue-500 flex items-center justify-center transition">
                        <i class="fa-solid fa-check text-[10px] text-white opacity-0 check-icon"></i>
                    </div>
                    <span class="text-sm text-slate-300 peer-checked:text-white transition">${t.name}</span>
                `;
                group.appendChild(item);
            });
            stackContainer.appendChild(group);
        }

        // Renderizar Grid (Glosario View) - Simplificado
        const grid = document.getElementById('tools-grid');
        tools.forEach(t => {
            const card = document.createElement('div');
            card.className = "bg-slate-900 border border-slate-800 p-4 rounded-xl flex items-center justify-between hover:border-blue-500/30 transition";
            card.innerHTML = `
                <span class="font-bold text-slate-200">${t.name}</span>
                <span class="text-xs text-slate-500 bg-slate-950 px-2 py-1 rounded">${t.cat}</span>
            `;
            grid.appendChild(card);
        });


        // --- 3. L√ìGICA DEL GENERADOR ---
        
        function setGoal(text) {
            document.getElementById('prompt-goal').value = text;
        }

        function clearSelection() {
            document.querySelectorAll('.tool-checkbox').forEach(c => c.checked = false);
        }

        function generatePrompt() {
            const role = document.getElementById('prompt-role').value;
            const goal = document.getElementById('prompt-goal').value || "[Describe tu objetivo aqu√≠]";
            
            // Recoger herramientas seleccionadas
            const selectedTools = Array.from(document.querySelectorAll('.tool-checkbox:checked')).map(cb => cb.value);
            const stackText = selectedTools.length > 0 
                ? selectedTools.join(", ") 
                : "las herramientas m√°s adecuadas del stack";

            // PLANTILLA DE PROMPT MAESTRO
            const prompt = `
**ROL:**
Act√∫a como un ${role}. Eres pragm√°tico, enfocado en c√≥digo limpio y soluciones "Local First".

**CONTEXTO:**
Estoy trabajando en el proyecto, un sistema de gesti√≥n multimedia local.
Mi stack tecnol√≥gico actual incluye: ${stackText}.

**OBJETIVO:**
${goal}

**RESTRICCIONES Y ESTILO:**
1. Prioriza soluciones que funcionen en local (sin dependencias cloud innecesarias).
2. Si generas c√≥digo, usa comentarios explicativos breves.
3. Sigue las mejores pr√°cticas para ${stackText}.
4. Mant√©n la estructura modular.

**SALIDA ESPERADA:**
Provee la soluci√≥n paso a paso, explicando el "por qu√©" de las decisiones arquitect√≥nicas antes del c√≥digo.
`.trim();

            // Efecto de mecanograf√≠a simple
            const outputDiv = document.getElementById('prompt-output');
            outputDiv.innerHTML = '';
            outputDiv.textContent = prompt;
        }

        function copyToClipboard() {
            const text = document.getElementById('prompt-output').textContent;
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.querySelector('button[onclick="copyToClipboard()"]');
                const original = btn.innerHTML;
                btn.innerHTML = '<i class="fa-solid fa-check"></i> Copiado';
                btn.classList.replace('bg-blue-600', 'bg-green-600');
                setTimeout(() => {
                    btn.innerHTML = original;
                    btn.classList.replace('bg-green-600', 'bg-blue-600');
                }, 2000);
            });
        }

        // --- 4. NAVEGACI√ìN ---
        function switchView(view) {
            ['generator', 'grid', 'flow'].forEach(v => {
                document.getElementById(`view-${v}`).classList.add('hidden');
                const btn = document.getElementById(`btn-${v}`);
                if(btn) {
                    btn.classList.remove('bg-blue-600', 'text-white', 'shadow-lg', 'shadow-blue-900/20');
                    btn.classList.add('text-slate-400', 'hover:bg-slate-800');
                }
            });
            
            document.getElementById(`view-${view}`).classList.remove('hidden');
            const activeBtn = document.getElementById(`btn-${view}`);
            activeBtn.classList.remove('text-slate-400', 'hover:bg-slate-800');
            activeBtn.classList.add('bg-blue-600', 'text-white', 'shadow-lg', 'shadow-blue-900/20');
            
            // T√≠tulo
            const titles = { 'generator': 'Generador de Prompts', 'grid': 'Glosario de Herramientas', 'flow': 'Diagramas de Flujo' };
            document.getElementById('page-title').textContent = titles[view];
            
            // Toggle filtros/busqueda
            const extras = document.getElementById('search-container');
            if(view === 'grid') extras.classList.remove('hidden'); else extras.classList.add('hidden');
        }

    </script>
</body>
</html>